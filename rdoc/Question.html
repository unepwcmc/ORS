<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Question

    &mdash; Documentation by YARD 0.7.2

</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>

    <div id="header">
      <div id="menu">

    <a href="_index.html">Index (Q)</a> &raquo;


    <span class="title">Question</span>


  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">

    <a id="class_list_link" href="#">Class List</a>

    <a id="method_list_link" href="#">Method List</a>

    <a id="file_list_link" href="#">File List</a>

</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Question



</h1>

<dl class="box">

    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">ActiveRecord::Base</span>

        <ul class="fullTree">
          <li>Object</li>

            <li class="next">ActiveRecord::Base</li>

            <li class="next">Question</li>

        </ul>
        <a href="#" class="inheritanceTree">show all</a>

      </dd>






      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="LanguageMethods.html" title="LanguageMethods (module)">LanguageMethods</a></span>, <span class='object_link'><a href="SectionsAndQuestionsShared.html" title="SectionsAndQuestionsShared (module)">SectionsAndQuestionsShared</a></span></dd>





    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">app/models/question.rb</dd>

</dl>
<div class="clear"></div>












  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">

      <li class="public ">
  <span class="summary_signature">

      <a href="#loop_item_type_ids-instance_method" title="#loop_item_type_ids (instance method)">- (Object) <strong>loop_item_type_ids</strong> </a>



  </span>











    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute loop_item_type_ids.
</p>
</div></span>

</li>


      <li class="public ">
  <span class="summary_signature">

      <a href="#question_extras_ids-instance_method" title="#question_extras_ids (instance method)">- (Object) <strong>question_extras_ids</strong> </a>



  </span>











    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute question_extras_ids.
</p>
</div></span>

</li>


  </ul>












    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">

        <li class="public ">
  <span class="summary_signature">

      <a href="#answer_present%3F-class_method" title="answer_present? (class method)">+ (Boolean) <strong>answer_present?</strong>(entered_answer) </a>



  </span>








    <span class="summary_desc"><div class='inline'><p>
Verifies if the params for a specific question contain any answer.
</p>
</div></span>

</li>


        <li class="public ">
  <span class="summary_signature">

      <a href="#create_question_answer_type-class_method" title="create_question_answer_type (class method)">+ (Object) <strong>create_question_answer_type</strong>(params) </a>



  </span>








    <span class="summary_desc"><div class='inline'><p>
create the question&#8217;s answer_type or use the section answer type.
</p>
</div></span>

</li>


        <li class="public ">
  <span class="summary_signature">

      <a href="#create_question_from-class_method" title="create_question_from (class method)">+ (Object) <strong>create_question_from</strong>(params) </a>



  </span>








    <span class="summary_desc"><div class='inline'><p>
Methods.
</p>
</div></span>

</li>


        <li class="public ">
  <span class="summary_signature">

      <a href="#get_answer-class_method" title="get_answer (class method)">+ (Object) <strong>get_answer</strong>(answers, q_id, loop_item_id = nil) </a>



  </span>








    <span class="summary_desc"><div class='inline'></div></span>

</li>


    </ul>

    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">

        <li class="public ">
  <span class="summary_signature">

      <a href="#answered_status-instance_method" title="#answered_status (instance method)">- (Object) <strong>answered_status</strong>(user, loop_item_id = nil) </a>



  </span>








    <span class="summary_desc"><div class='inline'><p>
returns false =&gt; answers missing, true =&gt; at least one answer filled.
</p>
</div></span>

</li>


        <li class="public ">
  <span class="summary_signature">

      <a href="#clone_question-instance_method" title="#clone_question (instance method)">- (Object) <strong>clone_question</strong>(questions_link, options_link, text_fields_link, numeric_answers_link, loop_item_types_link, cloned_sections, extras_link) </a>



  </span>








    <span class="summary_desc"><div class='inline'><p>
function to clone questions, auxiliary to the &quot;duplicate
questionnaire&quot; feature params:.
</p>
</div></span>

</li>


        <li class="public ">
  <span class="summary_signature">

      <a href="#nested_under_dependent_section%3F-instance_method" title="#nested_under_dependent_section? (instance method)">- (Boolean, ...) <strong>nested_under_dependent_section?</strong> </a>



  </span>








    <span class="summary_desc"><div class='inline'></div></span>

</li>


        <li class="public ">
  <span class="summary_signature">

      <a href="#remove_submission_elements%21-instance_method" title="#remove_submission_elements! (instance method)">- (Object) <strong>remove_submission_elements!</strong> </a>



  </span>








    <span class="summary_desc"><div class='inline'></div></span>

</li>


        <li class="public ">
  <span class="summary_signature">

      <a href="#save_answers-instance_method" title="#save_answers (instance method)">- (Object) <strong>save_answers</strong>(params, answer, other_text, fields_to_clear, details_fields) </a>



  </span>








    <span class="summary_desc"><div class='inline'><p>
Function to save the answers of a question Params: params (Hash or String):
the data that has been input for this question.id + identifier (if it
exists) .
</p>
</div></span>

</li>


        <li class="public ">
  <span class="summary_signature">

      <a href="#short_title-instance_method" title="#short_title (instance method)">- (Object) <strong>short_title</strong> </a>



  </span>








    <span class="summary_desc"><div class='inline'></div></span>

</li>


        <li class="public ">
  <span class="summary_signature">

      <a href="#to_csv-instance_method" title="#to_csv (instance method)">- (Object) <strong>to_csv</strong>(submitters_ids, loop_sources = nil, litem_name = nil) </a>



  </span>








    <span class="summary_desc"><div class='inline'></div></span>

</li>


        <li class="public ">
  <span class="summary_signature">

      <a href="#update_answer_type-instance_method" title="#update_answer_type (instance method)">- (Object) <strong>update_answer_type</strong>(params) </a>



  </span>








    <span class="summary_desc"><div class='inline'></div></span>

</li>


    </ul>










  <h3 class="inherited">Methods included from <span class='object_link'><a href="SectionsAndQuestionsShared.html" title="SectionsAndQuestionsShared (module)">SectionsAndQuestionsShared</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="SectionsAndQuestionsShared.html#append_features-class_method" title="SectionsAndQuestionsShared.append_features (method)">append_features</a></span></p>








  <h3 class="inherited">Methods included from <span class='object_link'><a href="LanguageMethods.html" title="LanguageMethods (module)">LanguageMethods</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="LanguageMethods.html#append_features-class_method" title="LanguageMethods.append_features (method)">append_features</a></span>, <span class='object_link'><a href="LanguageMethods.html#language_code-class_method" title="LanguageMethods.language_code (method)">language_code</a></span></p>


  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>


      <span id="loop_item_type_ids=-instance_method"></span>
      <span id="loop_item_type_ids-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="loop_item_type_ids-instance_method">

    - (<tt>Object</tt>) <strong>loop_item_type_ids</strong>



</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute loop_item_type_ids
</p>


  </div>
</div>
<div class="tags">

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/question.rb', line 32</span>

<span class='def def kw'>def</span> <span class='loop_item_type_ids identifier id'>loop_item_type_ids</span>
  <span class='@loop_item_type_ids ivar id'>@loop_item_type_ids</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>


      <span id="question_extras_ids=-instance_method"></span>
      <span id="question_extras_ids-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="question_extras_ids-instance_method">

    - (<tt>Object</tt>) <strong>question_extras_ids</strong>



</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute question_extras_ids
</p>


  </div>
</div>
<div class="tags">

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/question.rb', line 32</span>

<span class='def def kw'>def</span> <span class='question_extras_ids identifier id'>question_extras_ids</span>
  <span class='@question_extras_ids ivar id'>@question_extras_ids</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>

  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>


      <div class="method_details first">
  <p class="signature first" id="answer_present?-class_method">

    + (<tt>Boolean</tt>) <strong>answer_present?</strong>(entered_answer)



</p><div class="docstring">
  <div class="discussion">
    <p>
Verifies if the params for a specific question contain any answer. This
check depends on the type of answer, indicated by the class of the params
related to that answer.
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">

    <li>


        <span class='type'>(<tt>Boolean</tt>)</span>



    </li>

</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


163
164
165
166
167
168
169
170
171</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/question.rb', line 163</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_present? fid id'>answer_present?</span> <span class='entered_answer identifier id'>entered_answer</span>
  <span class='if if kw'>if</span> <span class='entered_answer identifier id'>entered_answer</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='String constant id'>String</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='entered_answer identifier id'>entered_answer</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Array constant id'>Array</span><span class='rparen token'>)</span>
    <span class='entered_answer identifier id'>entered_answer</span><span class='dot token'>.</span><span class='present? fid id'>present?</span>
  <span class='elsif elsif kw'>elsif</span> <span class='entered_answer identifier id'>entered_answer</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Hash constant id'>Hash</span><span class='rparen token'>)</span>
    <span class='entered_answer identifier id'>entered_answer</span><span class='dot token'>.</span><span class='values identifier id'>values</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='present? fid id'>present?</span>
  <span class='else else kw'>else</span>
    <span class='false false kw'>false</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>

      <div class="method_details ">
  <p class="signature " id="create_question_answer_type-class_method">

    + (<tt>Object</tt>) <strong>create_question_answer_type</strong>(params)



</p><div class="docstring">
  <div class="discussion">
    <p>
create the question&#8217;s answer_type or use the section answer type
</p>


  </div>
</div>
<div class="tags">

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


50
51
52
53
54
55
56
57
58
59</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/question.rb', line 50</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='create_question_answer_type identifier id'>create_question_answer_type</span> <span class='params identifier id'>params</span>
  <span class='if if kw'>if</span> <span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:answer_type</span><span class='rbrack token'>]</span>
    <span class='answer_type identifier id'>answer_type</span> <span class='assign token'>=</span> <span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:part</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:answer_type_type</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='classify identifier id'>classify</span><span class='dot token'>.</span><span class='constantize identifier id'>constantize</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:answer_type</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='answer_type identifier id'>answer_type</span><span class='dot token'>.</span><span class='save identifier id'>save</span>
      <span class='answer_type identifier id'>answer_type</span>
    <span class='end end kw'>end</span>
  <span class='else else kw'>else</span>
    <span class='Section constant id'>Section</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:part</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:section_id</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>

      <div class="method_details ">
  <p class="signature " id="create_question_from-class_method">

    + (<tt>Object</tt>) <strong>create_question_from</strong>(params)



</p><div class="docstring">
  <div class="discussion">
    <p>
Methods
</p>


  </div>
</div>
<div class="tags">

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


43
44
45
46
47</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/question.rb', line 43</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='create_question_from identifier id'>create_question_from</span> <span class='params identifier id'>params</span>
  <span class='question identifier id'>question</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:part</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='question identifier id'>question</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span> <span class='assign token'>=</span> <span class='Question constant id'>Question</span><span class='dot token'>.</span><span class='create_question_answer_type identifier id'>create_question_answer_type</span> <span class='params identifier id'>params</span>
  <span class='question identifier id'>question</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>

      <div class="method_details ">
  <p class="signature " id="get_answer-class_method">

    + (<tt>Object</tt>) <strong>get_answer</strong>(answers, q_id, loop_item_id = nil)



</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


198
199
200
201
202
203
204</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/question.rb', line 198</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='get_answer identifier id'>get_answer</span> <span class='answers identifier id'>answers</span><span class='comma token'>,</span> <span class='q_id identifier id'>q_id</span><span class='comma token'>,</span> <span class='loop_item_id identifier id'>loop_item_id</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span>
  <span class='return return kw'>return</span> <span class='nil nil kw'>nil</span> <span class='if if_mod kw'>if</span> <span class='answers identifier id'>answers</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
  <span class='answers identifier id'>answers</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='answer identifier id'>answer</span><span class='bitor op'>|</span>
    <span class='return return kw'>return</span> <span class='answer identifier id'>answer</span> <span class='if if_mod kw'>if</span> <span class='lparen token'>(</span> <span class='answer identifier id'>answer</span><span class='dot token'>.</span><span class='question_id identifier id'>question_id</span> <span class='eq op'>==</span> <span class='q_id identifier id'>q_id</span> <span class='andop op'>&amp;&amp;</span> <span class='lparen token'>(</span> <span class='notop op'>!</span><span class='loop_item_id identifier id'>loop_item_id</span> <span class='orop op'>||</span> <span class='lparen token'>(</span><span class='answer identifier id'>answer</span><span class='dot token'>.</span><span class='loop_item_id identifier id'>loop_item_id</span> <span class='eq op'>==</span> <span class='loop_item_id identifier id'>loop_item_id</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>

  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>


      <div class="method_details first">
  <p class="signature first" id="answered_status-instance_method">

    - (<tt>Object</tt>) <strong>answered_status</strong>(user, loop_item_id = nil)



</p><div class="docstring">
  <div class="discussion">
    <p>
returns false =&gt; answers missing, true =&gt; at least one answer filled
</p>


  </div>
</div>
<div class="tags">

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/question.rb', line 173</span>

<span class='def def kw'>def</span> <span class='answered_status identifier id'>answered_status</span><span class='lparen token'>(</span><span class='user identifier id'>user</span><span class='comma token'>,</span> <span class='loop_item_id identifier id'>loop_item_id</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span><span class='comment val'># returns false =&gt; answers missing, true =&gt; at least one answer filled</span>
  <span class='Array constant id'>Array</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='answers identifier id'>answers</span><span class='dot token'>.</span><span class='find_by_user_id_and_loop_item_id identifier id'>find_by_user_id_and_loop_item_id</span><span class='lparen token'>(</span><span class='user identifier id'>user</span><span class='dot token'>.</span><span class='id identifier id'>id</span><span class='comma token'>,</span> <span class='loop_item_id identifier id'>loop_item_id</span><span class='rparen token'>)</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='answer identifier id'>answer</span><span class='bitor op'>|</span>
    <span class='if if kw'>if</span> <span class='answer identifier id'>answer</span><span class='dot token'>.</span><span class='other_text identifier id'>other_text</span><span class='dot token'>.</span><span class='present? fid id'>present?</span>
      <span class='return return kw'>return</span> <span class='true true kw'>true</span>
    <span class='end end kw'>end</span>
    <span class='if if kw'>if</span> <span class='answer identifier id'>answer</span><span class='dot token'>.</span><span class='answer_parts identifier id'>answer_parts</span>
      <span class='answer identifier id'>answer</span><span class='dot token'>.</span><span class='answer_parts identifier id'>answer_parts</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='ap identifier id'>ap</span><span class='bitor op'>|</span>
        <span class='comment val'>#Is answerd if it's a TextAnswer or NumericAnswer and it has a answer_text</span>
        <span class='comment val'>#Or if it's not of that type and the field (MultiAnswerOption, RangeAnswerOption, RankAnswerOption) exists</span>
        <span class='comment val'>#Or if it has answer_part_matrix_options present</span>
        <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='ap identifier id'>ap</span><span class='dot token'>.</span><span class='answer_text identifier id'>answer_text</span> <span class='andop op'>&amp;&amp;</span> <span class='ap identifier id'>ap</span><span class='dot token'>.</span><span class='answer_text identifier id'>answer_text</span> <span class='neq op'>!=</span> <span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='lparen token'>(</span><span class='notop op'>!</span><span class='lbrack token'>[</span><span class='string val'>&quot;TextAnswerField&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;NumericAnswer&quot;</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='ap identifier id'>ap</span><span class='dot token'>.</span><span class='field_type_type identifier id'>field_type_type</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='ap identifier id'>ap</span><span class='dot token'>.</span><span class='field_type identifier id'>field_type</span><span class='dot token'>.</span><span class='present? fid id'>present?</span><span class='rparen token'>)</span>  <span class='orop op'>||</span> <span class='lparen token'>(</span> <span class='ap identifier id'>ap</span><span class='dot token'>.</span><span class='answer_part_matrix_options identifier id'>answer_part_matrix_options</span><span class='dot token'>.</span><span class='any? fid id'>any?</span> <span class='rparen token'>)</span>
          <span class='return return kw'>return</span> <span class='true true kw'>true</span>
        <span class='end end kw'>end</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='false false kw'>false</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>

      <div class="method_details ">
  <p class="signature " id="clone_question-instance_method">

    - (<tt>Object</tt>) <strong>clone_question</strong>(questions_link, options_link, text_fields_link, numeric_answers_link, loop_item_types_link, cloned_sections, extras_link)



</p><div class="docstring">
  <div class="discussion">
    <p>
function to clone questions, auxiliary to the &quot;duplicate
questionnaire&quot; feature params:
</p>
<pre class="code">
  <span class='minus op'>-</span> <span class='answer_type identifier id'>answer_type</span><span class='colon op'>:</span> <span class='if if kw'>if</span> <span class='question identifier id'>question</span> <span class='belongs identifier id'>belongs</span> <span class='to identifier id'>to</span> <span class='a identifier id'>a</span> <span class='same identifier id'>same</span> <span class='answer identifier id'>answer</span> <span class='type identifier id'>type</span> <span class='section identifier id'>section</span> <span class='it identifier id'>it</span> <span class='receives identifier id'>receives</span> <span class='the identifier id'>the</span> <span class='answer identifier id'>answer</span> <span class='type identifier id'>type</span> <span class='as identifier id'>as</span> <span class='a identifier id'>a</span> <span class='parameter identifier id'>parameter</span>
  <span class='minus op'>-</span> <span class='questions_link identifier id'>questions_link</span> <span class='colon op'>:</span> <span class='hash identifier id'>hash</span> <span class='to identifier id'>to</span> <span class='maintain identifier id'>maintain</span> <span class='the identifier id'>the</span> <span class='relation identifier id'>relation</span> <span class='between identifier id'>between</span> <span class='the identifier id'>the</span> <span class='original identifier id'>original</span> <span class='question identifier id'>question</span> <span class='and and kw'>and</span> <span class='its identifier id'>its</span> <span class='clone identifier id'>clone</span>
  <span class='minus op'>-</span> <span class='options_link identifier id'>options_link</span> <span class='colon op'>:</span> <span class='hash identifier id'>hash</span> <span class='to identifier id'>to</span> <span class='maintain identifier id'>maintain</span> <span class='the identifier id'>the</span> <span class='relation identifier id'>relation</span> <span class='between identifier id'>between</span> <span class='the identifier id'>the</span> <span class='original identifier id'>original</span> <span class='multi identifier id'>multi</span> <span class='answer identifier id'>answer</span> <span class='options identifier id'>options</span> <span class='and and kw'>and</span> <span class='their identifier id'>their</span> <span class='clones identifier id'>clones</span>
  <span class='minus op'>-</span> <span class='text_fields_link identifier id'>text_fields_link</span><span class='colon op'>:</span> <span class='hash identifier id'>hash</span> <span class='to identifier id'>to</span> <span class='maintain identifier id'>maintain</span> <span class='the identifier id'>the</span> <span class='relation identifier id'>relation</span> <span class='between identifier id'>between</span> <span class='the identifier id'>the</span> <span class='original identifier id'>original</span> <span class='text identifier id'>text</span> <span class='answer identifier id'>answer</span> <span class='fields identifier id'>fields</span> <span class='and and kw'>and</span> <span class='their identifier id'>their</span> <span class='clones identifier id'>clones</span>
</pre>
<p>
return:
</p>
<pre class="code">
  <span class='minus op'>-</span> <span class='returns identifier id'>returns</span> <span class='the identifier id'>the</span> <span class='new_question identifier id'>new_question</span>
</pre>


  </div>
</div>
<div class="tags">

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/question.rb', line 95</span>

<span class='def def kw'>def</span> <span class='clone_question identifier id'>clone_question</span> <span class='questions_link identifier id'>questions_link</span><span class='comma token'>,</span> <span class='options_link identifier id'>options_link</span><span class='comma token'>,</span> <span class='text_fields_link identifier id'>text_fields_link</span><span class='comma token'>,</span> <span class='numeric_answers_link identifier id'>numeric_answers_link</span><span class='comma token'>,</span> <span class='loop_item_types_link identifier id'>loop_item_types_link</span><span class='comma token'>,</span> <span class='cloned_sections identifier id'>cloned_sections</span><span class='comma token'>,</span> <span class='extras_link identifier id'>extras_link</span>
  <span class='new_question identifier id'>new_question</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='clone_object identifier id'>clone_object</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='symbol val'>:is_mandatory</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='comment val'>#clone question fields</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='question_fields identifier id'>question_fields</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='field identifier id'>field</span><span class='bitor op'>|</span>
    <span class='new_question identifier id'>new_question</span><span class='dot token'>.</span><span class='question_fields identifier id'>question_fields</span> <span class='lshft op'>&lt;&lt;</span> <span class='field identifier id'>field</span><span class='dot token'>.</span><span class='clone_object identifier id'>clone_object</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='symbol val'>:language</span><span class='comma token'>,</span> <span class='symbol val'>:title</span><span class='comma token'>,</span> <span class='symbol val'>:short_title</span><span class='comma token'>,</span> <span class='symbol val'>:description</span><span class='comma token'>,</span> <span class='symbol val'>:is_default_language</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='new_question identifier id'>new_question</span><span class='dot token'>.</span><span class='section identifier id'>section</span> <span class='assign token'>=</span> <span class='cloned_sections identifier id'>cloned_sections</span><span class='lbrack token'>[</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='section identifier id'>section</span><span class='dot token'>.</span><span class='id identifier id'>id</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrack token'>]</span>

  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='question_extras identifier id'>question_extras</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='q_extra identifier id'>q_extra</span><span class='bitor op'>|</span>
    <span class='new_q_extra identifier id'>new_q_extra</span> <span class='assign token'>=</span> <span class='q_extra identifier id'>q_extra</span><span class='dot token'>.</span><span class='clone identifier id'>clone</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
    <span class='new_q_extra identifier id'>new_q_extra</span><span class='dot token'>.</span><span class='extra identifier id'>extra</span> <span class='assign token'>=</span> <span class='extras_link identifier id'>extras_link</span><span class='lbrack token'>[</span><span class='q_extra identifier id'>q_extra</span><span class='dot token'>.</span><span class='extra_id identifier id'>extra_id</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrack token'>]</span>
    <span class='new_question identifier id'>new_question</span><span class='dot token'>.</span><span class='question_extras identifier id'>question_extras</span> <span class='lshft op'>&lt;&lt;</span> <span class='new_q_extra identifier id'>new_q_extra</span>
  <span class='end end kw'>end</span>

  <span class='comment val'>#clone question loop_types</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='loop_item_types identifier id'>loop_item_types</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='type identifier id'>type</span><span class='bitor op'>|</span>
    <span class='new_question identifier id'>new_question</span><span class='dot token'>.</span><span class='loop_item_types identifier id'>loop_item_types</span> <span class='lshft op'>&lt;&lt;</span> <span class='loop_item_types_link identifier id'>loop_item_types_link</span><span class='lbrack token'>[</span><span class='type identifier id'>type</span><span class='dot token'>.</span><span class='id identifier id'>id</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrack token'>]</span>
  <span class='end end kw'>end</span>
  <span class='if if kw'>if</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='section identifier id'>section</span><span class='dot token'>.</span><span class='section_type identifier id'>section_type</span> <span class='eq op'>==</span> <span class='integer val'>1</span> <span class='comment val'>#same answer_type</span>
    <span class='new_question identifier id'>new_question</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span> <span class='assign token'>=</span> <span class='cloned_sections identifier id'>cloned_sections</span><span class='lbrack token'>[</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='section identifier id'>section</span><span class='dot token'>.</span><span class='id identifier id'>id</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span>
  <span class='else else kw'>else</span>
    <span class='if if kw'>if</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='MultiAnswer constant id'>MultiAnswer</span><span class='rparen token'>)</span>
      <span class='new_question identifier id'>new_question</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span><span class='dot token'>.</span><span class='clone_answer_type identifier id'>clone_answer_type</span><span class='lparen token'>(</span><span class='options_link identifier id'>options_link</span><span class='rparen token'>)</span>
    <span class='elsif elsif kw'>elsif</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='TextAnswer constant id'>TextAnswer</span><span class='rparen token'>)</span>
      <span class='new_question identifier id'>new_question</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span><span class='dot token'>.</span><span class='clone_answer_type identifier id'>clone_answer_type</span><span class='lparen token'>(</span><span class='text_fields_link identifier id'>text_fields_link</span><span class='rparen token'>)</span>
    <span class='elsif elsif kw'>elsif</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='NumericAnswer constant id'>NumericAnswer</span><span class='rparen token'>)</span>
      <span class='new_question identifier id'>new_question</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span><span class='dot token'>.</span><span class='clone_answer_type identifier id'>clone_answer_type</span><span class='lparen token'>(</span><span class='numeric_answers_link identifier id'>numeric_answers_link</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='questions_link identifier id'>questions_link</span><span class='lbrack token'>[</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='id identifier id'>id</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='new_question identifier id'>new_question</span> <span class='comment val'>#save the clone information, to keep the dependency on the copy of the questionnaire</span>
  <span class='new_question identifier id'>new_question</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>

      <div class="method_details ">
  <p class="signature " id="nested_under_dependent_section?-instance_method">

    - (<tt>Boolean</tt>, ...) <strong>nested_under_dependent_section?</strong>



</p><div class="docstring">
  <div class="discussion">


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">

    <li>


        <span class='type'>(<tt>Boolean</tt>)</span>



        &mdash;
        <div class='inline'><p>
True if it&#8217;s nested under a dependent section, false otherwise
</p>
</div>

    </li>

    <li>


        <span class='type'>(<tt><span class='object_link'><a href="Section.html" title="Section (class)">Section</a></span></tt>, <tt>nil</tt>)</span>



        &mdash;
        <div class='inline'><p>
Returns the dependent section this question is nested under, returns nil if
the section is not nested under a dependent section
</p>
</div>

    </li>

</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


209
210
211
212
213
214
215</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/question.rb', line 209</span>

<span class='def def kw'>def</span> <span class='nested_under_dependent_section? fid id'>nested_under_dependent_section?</span>
  <span class='return return kw'>return</span> <span class='lbrack token'>[</span><span class='true true kw'>true</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='section identifier id'>section</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='section identifier id'>section</span><span class='dot token'>.</span><span class='depends_on_question identifier id'>depends_on_question</span><span class='dot token'>.</span><span class='present? fid id'>present?</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='section identifier id'>section</span><span class='dot token'>.</span><span class='ancestors identifier id'>ancestors</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='ancestor identifier id'>ancestor</span><span class='bitor op'>|</span>
    <span class='return return kw'>return</span> <span class='lbrack token'>[</span><span class='true true kw'>true</span><span class='comma token'>,</span> <span class='ancestor identifier id'>ancestor</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='ancestor identifier id'>ancestor</span><span class='dot token'>.</span><span class='depends_on_question identifier id'>depends_on_question</span><span class='dot token'>.</span><span class='present? fid id'>present?</span>
  <span class='end end kw'>end</span>
  <span class='false false kw'>false</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>

      <div class="method_details ">
  <p class="signature " id="remove_submission_elements!-instance_method">

    - (<tt>Object</tt>) <strong>remove_submission_elements!</strong>



</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


192
193
194
195
196</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/question.rb', line 192</span>

<span class='def def kw'>def</span> <span class='remove_submission_elements! fid id'>remove_submission_elements!</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answers identifier id'>answers</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='answer identifier id'>answer</span><span class='bitor op'>|</span>
    <span class='answer identifier id'>answer</span><span class='dot token'>.</span><span class='destroy identifier id'>destroy</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>

      <div class="method_details ">
  <p class="signature " id="save_answers-instance_method">

    - (<tt>Object</tt>) <strong>save_answers</strong>(params, answer, other_text, fields_to_clear, details_fields)



</p><div class="docstring">
  <div class="discussion">
    <p>
Function to save the answers of a question Params: params (Hash or String):
the data that has been input for this question.id + identifier (if it
exists) . params is an hash when the answer type is MultiAnswer and the
selection type is multiple. Otherwise it will be a string. answer (Answer):
the answer object that will store the answer for this question+identifier .
Is unique for [user.id, question.id, loop_item_id] other_text (string): For
Multi Answer questions an &quot;other&quot; option might exist. the
variable other_text holds its value fields_to_clear (hash): hash with the
form id of the other_text, if it is to be cleared (when the other option is
not selected) details_fields (hash): For multiAnswers options can have a
&quot;details field&quot;, the data that has been input in those fields
comes in this variable. An hash :multi_option_id =&gt; :details_text
</p>


  </div>
</div>
<div class="tags">

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/question.rb', line 135</span>

<span class='def def kw'>def</span> <span class='save_answers identifier id'>save_answers</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='comma token'>,</span> <span class='answer identifier id'>answer</span><span class='comma token'>,</span> <span class='other_text identifier id'>other_text</span><span class='comma token'>,</span> <span class='fields_to_clear identifier id'>fields_to_clear</span><span class='comma token'>,</span> <span class='details_fields identifier id'>details_fields</span><span class='rparen token'>)</span>
  <span class='saved_something identifier id'>saved_something</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
  <span class='if if kw'>if</span> <span class='other_text identifier id'>other_text</span>
    <span class='comment val'>#check if the &quot;other&quot; field has been selected.</span>
    <span class='comment val'># If params is an hash we are dealing with a check-boxes answer type and the 'other' is selected if params[&quot;-1&quot;].present?</span>
    <span class='comment val'># If params is a String its either a radio button or a drop down or a select box. So if its a radio button params should be equal to &quot;-1&quot; for 'other' to be selected. For drop down or select box other_text just needs to be presented (not blank)</span>
    <span class='if if kw'>if</span> <span class='lparen token'>(</span> <span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Hash constant id'>Hash</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='notop op'>!</span><span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='string val'>&quot;-1&quot;</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='present? fid id'>present?</span> <span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='String constant id'>String</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span><span class='dot token'>.</span><span class='display_type identifier id'>display_type</span> <span class='neq op'>!=</span> <span class='integer val'>1</span> <span class='andop op'>&amp;&amp;</span> <span class='params identifier id'>params</span> <span class='neq op'>!=</span> <span class='string val'>&quot;-1&quot;</span> <span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span>  <span class='notop op'>!</span><span class='other_text identifier id'>other_text</span><span class='dot token'>.</span><span class='blank? fid id'>blank?</span>
      <span class='answer identifier id'>answer</span><span class='dot token'>.</span><span class='other_text identifier id'>other_text</span> <span class='assign token'>=</span> <span class='string val'>&quot;&quot;</span>
      <span class='answer identifier id'>answer</span><span class='dot token'>.</span><span class='save! fid id'>save!</span>
      <span class='saved_something identifier id'>saved_something</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
      <span class='fields_to_clear identifier id'>fields_to_clear</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;answer_#{answer.question_id.to_s + (answer.loop_item.present? ? &quot;_#{answer.loop_item.id}&quot; : &quot;&quot;)}_other&quot;</span>
    <span class='else else kw'>else</span>
      <span class='if if kw'>if</span> <span class='answer identifier id'>answer</span><span class='dot token'>.</span><span class='other_text identifier id'>other_text</span> <span class='neq op'>!=</span> <span class='other_text identifier id'>other_text</span>
        <span class='answer identifier id'>answer</span><span class='dot token'>.</span><span class='other_text identifier id'>other_text</span> <span class='assign token'>=</span> <span class='other_text identifier id'>other_text</span>
        <span class='answer identifier id'>answer</span><span class='dot token'>.</span><span class='save! fid id'>save!</span>
        <span class='saved_something identifier id'>saved_something</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='if if kw'>if</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='MultiAnswer constant id'>MultiAnswer</span><span class='rparen token'>)</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span><span class='dot token'>.</span><span class='save_answers identifier id'>save_answers</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='comma token'>,</span> <span class='answer identifier id'>answer</span><span class='comma token'>,</span> <span class='details_fields identifier id'>details_fields</span><span class='comma token'>,</span> <span class='fields_to_clear identifier id'>fields_to_clear</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='saved_something identifier id'>saved_something</span>
  <span class='else else kw'>else</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span><span class='dot token'>.</span><span class='save_answers identifier id'>save_answers</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='comma token'>,</span> <span class='answer identifier id'>answer</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='saved_something identifier id'>saved_something</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>

      <div class="method_details ">
  <p class="signature " id="short_title-instance_method">

    - (<tt>Object</tt>) <strong>short_title</strong>



</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


82
83
84
85</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/question.rb', line 82</span>

<span class='def def kw'>def</span> <span class='short_title identifier id'>short_title</span>
  <span class='the_short identifier id'>the_short</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='question_fields identifier id'>question_fields</span><span class='dot token'>.</span><span class='find_by_is_default_language identifier id'>find_by_is_default_language</span><span class='lparen token'>(</span><span class='true true kw'>true</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='short_title identifier id'>short_title</span>
  <span class='the_short identifier id'>the_short</span> <span class='integer val'>? </span><span class='the_short identifier id'>the_short</span> <span class='colon op'>:</span> <span class='string val'>&quot;#Not Specified#&quot;</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>

      <div class="method_details ">
  <p class="signature " id="to_csv-instance_method">

    - (<tt>Object</tt>) <strong>to_csv</strong>(submitters_ids, loop_sources = nil, litem_name = nil)



</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/question.rb', line 217</span>

<span class='def def kw'>def</span> <span class='to_csv identifier id'>to_csv</span> <span class='submitters_ids identifier id'>submitters_ids</span><span class='comma token'>,</span> <span class='loop_sources identifier id'>loop_sources</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='litem_name identifier id'>litem_name</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span>
  <span class='rows identifier id'>rows</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='answers identifier id'>answers</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='submitters_ids identifier id'>submitters_ids</span><span class='dot token'>.</span><span class='each_with_index identifier id'>each_with_index</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='val identifier id'>val</span><span class='comma token'>,</span> <span class='i identifier id'>i</span><span class='bitor op'>|</span>
    <span class='if if kw'>if</span> <span class='litem_name identifier id'>litem_name</span>
      <span class='answers identifier id'>answers</span><span class='lbrack token'>[</span><span class='val identifier id'>val</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answers identifier id'>answers</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='symbol val'>:first</span><span class='comma token'>,</span> <span class='symbol val'>:conditions</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='symbol val'>:user_id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='val identifier id'>val</span><span class='comma token'>,</span> <span class='symbol val'>:loop_item_id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='litem_name identifier id'>litem_name</span><span class='dot token'>.</span><span class='loop_items identifier id'>loop_items</span><span class='dot token'>.</span><span class='map identifier id'>map</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:id</span><span class='rparen token'>)</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span>
      <span class='answers identifier id'>answers</span><span class='lbrack token'>[</span><span class='val identifier id'>val</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answers identifier id'>answers</span><span class='dot token'>.</span><span class='find_by_user_id identifier id'>find_by_user_id</span><span class='lparen token'>(</span><span class='val identifier id'>val</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
    <span class='comment val'>#answers[val.to_s] = self.answers.find_by_user_id_and_loop_item_id(val, litem_name ? litem_name.loop_items.map(&amp;:id) : nil)</span>
  <span class='end end kw'>end</span>
  <span class='if if kw'>if</span> <span class='litem_name identifier id'>litem_name</span>
    <span class='s_title identifier id'>s_title</span> <span class='assign token'>=</span> <span class='string val'>&quot;--&quot;</span><span class='mult op'>*</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='section identifier id'>section</span><span class='dot token'>.</span><span class='level identifier id'>level</span> <span class='plus op'>+</span> <span class='OrtSanitize constant id'>OrtSanitize</span><span class='dot token'>.</span><span class='white_space_cleanse identifier id'>white_space_cleanse</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='section identifier id'>section</span><span class='dot token'>.</span><span class='section_fields identifier id'>section_fields</span><span class='dot token'>.</span><span class='find_by_is_default_language identifier id'>find_by_is_default_language</span><span class='lparen token'>(</span><span class='true true kw'>true</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='loop_title identifier id'>loop_title</span><span class='lparen token'>(</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='litem_name identifier id'>litem_name</span><span class='dot token'>.</span><span class='loop_items identifier id'>loop_items</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='q_title identifier id'>q_title</span> <span class='assign token'>=</span> <span class='OrtSanitize constant id'>OrtSanitize</span><span class='dot token'>.</span><span class='white_space_cleanse identifier id'>white_space_cleanse</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='question_fields identifier id'>question_fields</span><span class='dot token'>.</span><span class='find_by_is_default_language identifier id'>find_by_is_default_language</span><span class='lparen token'>(</span><span class='true true kw'>true</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='loop_title identifier id'>loop_title</span><span class='lparen token'>(</span><span class='loop_sources identifier id'>loop_sources</span><span class='comma token'>,</span> <span class='litem_name identifier id'>litem_name</span><span class='dot token'>.</span><span class='loop_items identifier id'>loop_items</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='s_title identifier id'>s_title</span> <span class='assign token'>=</span> <span class='string val'>&quot;--&quot;</span><span class='mult op'>*</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='section identifier id'>section</span><span class='dot token'>.</span><span class='level identifier id'>level</span> <span class='plus op'>+</span> <span class='OrtSanitize constant id'>OrtSanitize</span><span class='dot token'>.</span><span class='white_space_cleanse identifier id'>white_space_cleanse</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='section identifier id'>section</span><span class='dot token'>.</span><span class='title identifier id'>title</span><span class='rparen token'>)</span>
    <span class='q_title identifier id'>q_title</span> <span class='assign token'>=</span> <span class='OrtSanitize constant id'>OrtSanitize</span><span class='dot token'>.</span><span class='white_space_cleanse identifier id'>white_space_cleanse</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='title identifier id'>title</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='if if kw'>if</span> <span class='lbrack token'>[</span><span class='MatrixAnswer constant id'>MatrixAnswer</span><span class='comma token'>,</span> <span class='RankAnswer constant id'>RankAnswer</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_type_type identifier id'>answer_type_type</span> <span class='eq op'>==</span> <span class='string val'>&quot;RankAnswer&quot;</span>
      <span class='maximum_rank identifier id'>maximum_rank</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span><span class='dot token'>.</span><span class='maximum_choices identifier id'>maximum_choices</span> <span class='eq op'>==</span> <span class='integer val'>-1</span> <span class='question op'>?</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span><span class='dot token'>.</span><span class='rank_answer_options identifier id'>rank_answer_options</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='colon op'>:</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span><span class='dot token'>.</span><span class='maximum_choices identifier id'>maximum_choices</span>
      <span class='lparen token'>(</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='maximum_choices identifier id'>maximum_choices</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='option identifier id'>option</span><span class='bitor op'>|</span>
        <span class='row identifier id'>row</span> <span class='assign token'>=</span> <span class='Array constant id'>Array</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='submitters_ids identifier id'>submitters_ids</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='plus op'>+</span> <span class='integer val'>2</span><span class='rparen token'>)</span>
        <span class='row identifier id'>row</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='s_title identifier id'>s_title</span>
        <span class='row identifier id'>row</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='q_title identifier id'>q_title</span> <span class='plus op'>+</span> <span class='dstring node'>&quot;[Ranking Answer ##{option+1}]&quot;</span>
        <span class='submitters_ids identifier id'>submitters_ids</span><span class='dot token'>.</span><span class='each_with_index identifier id'>each_with_index</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='val identifier id'>val</span><span class='comma token'>,</span> <span class='i identifier id'>i</span><span class='bitor op'>|</span>
          <span class='if if kw'>if</span> <span class='answers identifier id'>answers</span><span class='lbrack token'>[</span><span class='val identifier id'>val</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrack token'>]</span>
            <span class='ap identifier id'>ap</span> <span class='assign token'>=</span> <span class='answers identifier id'>answers</span><span class='lbrack token'>[</span><span class='val identifier id'>val</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='answer_parts identifier id'>answer_parts</span><span class='dot token'>.</span><span class='sort identifier id'>sort</span><span class='lbrack token'>[</span><span class='option identifier id'>option</span><span class='rbrack token'>]</span>
          <span class='else else kw'>else</span>
            <span class='ap identifier id'>ap</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
          <span class='end end kw'>end</span>
          <span class='row identifier id'>row</span><span class='lbrack token'>[</span><span class='i identifier id'>i</span><span class='plus op'>+</span><span class='integer val'>2</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='ap identifier id'>ap</span> <span class='integer val'>? </span><span class='lparen token'>(</span><span class='ap identifier id'>ap</span><span class='dot token'>.</span><span class='answer_text_in_english identifier id'>answer_text_in_english</span><span class='dot token'>.</span><span class='present? fid id'>present?</span> <span class='integer val'>? </span><span class='dstring node'>&quot;[ en: #{ap.answer_text_in_english} ||\n ol: &quot;</span><span class='colon op'>:</span> <span class='string val'>&quot;[ &quot;</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='dstring node'>&quot;#{ap.try(:answer_text)} ]&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span>
        <span class='end end kw'>end</span>
        <span class='rows identifier id'>rows</span> <span class='lshft op'>&lt;&lt;</span> <span class='row identifier id'>row</span>
      <span class='end end kw'>end</span>
    <span class='elsif elsif kw'>elsif</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_type_type identifier id'>answer_type_type</span> <span class='eq op'>==</span> <span class='string val'>&quot;MatrixAnswer&quot;</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span><span class='dot token'>.</span><span class='matrix_answer_queries identifier id'>matrix_answer_queries</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='maq identifier id'>maq</span><span class='bitor op'>|</span>
        <span class='row identifier id'>row</span> <span class='assign token'>=</span> <span class='Array constant id'>Array</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='submitters_ids identifier id'>submitters_ids</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='plus op'>+</span> <span class='integer val'>2</span><span class='rparen token'>)</span>
        <span class='row identifier id'>row</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='s_title identifier id'>s_title</span>
        <span class='row identifier id'>row</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='q_title identifier id'>q_title</span> <span class='plus op'>+</span> <span class='dstring node'>&quot;[#{maq.title}]&quot;</span>
        <span class='submitters_ids identifier id'>submitters_ids</span><span class='dot token'>.</span><span class='each_with_index identifier id'>each_with_index</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='val identifier id'>val</span><span class='comma token'>,</span> <span class='i identifier id'>i</span><span class='bitor op'>|</span>
          <span class='row identifier id'>row</span><span class='lbrack token'>[</span><span class='i identifier id'>i</span><span class='plus op'>+</span><span class='integer val'>2</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='answers identifier id'>answers</span><span class='lbrack token'>[</span><span class='val identifier id'>val</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrack token'>]</span> <span class='andop op'>&amp;&amp;</span> <span class='answers identifier id'>answers</span><span class='lbrack token'>[</span><span class='val identifier id'>val</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='answer_parts identifier id'>answer_parts</span><span class='dot token'>.</span><span class='find_by_field_type_id identifier id'>find_by_field_type_id</span><span class='lparen token'>(</span><span class='maq identifier id'>maq</span><span class='dot token'>.</span><span class='id identifier id'>id</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='string val'>&quot;Selected&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;Unselected&quot;</span>
        <span class='end end kw'>end</span>
        <span class='rows identifier id'>rows</span> <span class='lshft op'>&lt;&lt;</span> <span class='row identifier id'>row</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='else else kw'>else</span>
    <span class='row identifier id'>row</span> <span class='assign token'>=</span> <span class='Array constant id'>Array</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='submitters_ids identifier id'>submitters_ids</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='plus op'>+</span> <span class='integer val'>2</span><span class='rparen token'>)</span>
    <span class='rows identifier id'>rows</span> <span class='lshft op'>&lt;&lt;</span> <span class='row identifier id'>row</span>
    <span class='row identifier id'>row</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='s_title identifier id'>s_title</span>
    <span class='row identifier id'>row</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='q_title identifier id'>q_title</span>
    <span class='submitters_ids identifier id'>submitters_ids</span><span class='dot token'>.</span><span class='each_with_index identifier id'>each_with_index</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='val identifier id'>val</span><span class='comma token'>,</span> <span class='i identifier id'>i</span><span class='bitor op'>|</span>
      <span class='if if kw'>if</span> <span class='answers identifier id'>answers</span><span class='lbrack token'>[</span><span class='val identifier id'>val</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrack token'>]</span>
        <span class='answer_text identifier id'>answer_text</span> <span class='assign token'>=</span> <span class='string val'>&quot;&quot;</span>
        <span class='answers identifier id'>answers</span><span class='lbrack token'>[</span><span class='val identifier id'>val</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='answer_parts identifier id'>answer_parts</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='ap identifier id'>ap</span><span class='bitor op'>|</span>
          <span class='answer_text identifier id'>answer_text</span> <span class='lshft op'>&lt;&lt;</span> <span class='lparen token'>(</span><span class='ap identifier id'>ap</span><span class='dot token'>.</span><span class='answer_text_in_english identifier id'>answer_text_in_english</span><span class='dot token'>.</span><span class='present? fid id'>present?</span> <span class='integer val'>? </span><span class='dstring node'>&quot;[ en: #{ap.answer_text_in_english} ||\n ol: &quot;</span><span class='colon op'>:</span> <span class='string val'>&quot;[ &quot;</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='dstring node'>&quot;#{ap.try(:answer_text)} ]&quot;</span>
        <span class='end end kw'>end</span>
        <span class='if if kw'>if</span> <span class='answers identifier id'>answers</span><span class='lbrack token'>[</span><span class='val identifier id'>val</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='other_text identifier id'>other_text</span><span class='dot token'>.</span><span class='present? fid id'>present?</span>
          <span class='answer_text identifier id'>answer_text</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;[Other:#{ answers[val.to_s].other_text}]&quot;</span>
        <span class='end end kw'>end</span>
        <span class='row identifier id'>row</span><span class='lbrack token'>[</span><span class='i identifier id'>i</span><span class='plus op'>+</span><span class='integer val'>2</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='answer_text identifier id'>answer_text</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='rows identifier id'>rows</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>

      <div class="method_details ">
  <p class="signature " id="update_answer_type-instance_method">

    - (<tt>Object</tt>) <strong>update_answer_type</strong>(params)



</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/question.rb', line 61</span>

<span class='def def kw'>def</span> <span class='update_answer_type identifier id'>update_answer_type</span> <span class='params identifier id'>params</span>
  <span class='if if kw'>if</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answers identifier id'>answers</span><span class='dot token'>.</span><span class='present? fid id'>present?</span> <span class='comment val'>#editing a question that has any answers associated with it will cause those answers to be removed</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='remove_submission_elements! fid id'>remove_submission_elements!</span>
  <span class='end end kw'>end</span>
  <span class='if if kw'>if</span> <span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:part</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:answer_type_type</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_type_type identifier id'>answer_type_type</span>
    <span class='comment val'>#if the answer type is the same, just update the answer_type attributes</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span><span class='dot token'>.</span><span class='update_attributes! fid id'>update_attributes!</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:answer_type</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='comment val'>#if the previous answer_type doesn't have other questions or sections associated, destroy it</span>
    <span class='if if kw'>if</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span><span class='dot token'>.</span><span class='questions identifier id'>questions</span><span class='dot token'>.</span><span class='count identifier id'>count</span> <span class='eq op'>==</span> <span class='integer val'>1</span> <span class='andop op'>&amp;&amp;</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span><span class='dot token'>.</span><span class='sections identifier id'>sections</span><span class='dot token'>.</span><span class='count identifier id'>count</span> <span class='eq op'>==</span> <span class='integer val'>0</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_type_id identifier id'>answer_type_id</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='destroy identifier id'>destroy</span>
    <span class='end end kw'>end</span>
    <span class='comment val'>#create thew new answer type based on the params (if they exist. For questions of &quot;same answer type&quot; sections, it doesn't exist.</span>
    <span class='if if kw'>if</span> <span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:part</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:answer_type_type</span><span class='rbrack token'>]</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span> <span class='assign token'>=</span> <span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:part</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:answer_type_type</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='classify identifier id'>classify</span><span class='dot token'>.</span><span class='constantize identifier id'>constantize</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:answer_type</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='answer_type identifier id'>answer_type</span><span class='dot token'>.</span><span class='save! fid id'>save!</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>

  </div>

</div>

    <div id="footer">
  Generated on Fri Jul  8 14:33:41 2011 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.8.7).
</div>

  </body>
</html>
